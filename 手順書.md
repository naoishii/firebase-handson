
# Firebaseハンズオン

## 準備
まずはReactの準備

create-react-appで雛形を作る

その他もろもろも準備。最新の環境でやっていこうぜ。  
とはいえ設定ファイルもすべてgitに上がっているのでそれを使えばOKです。

* eslint
* prettier
  + vscodeにprettierプラグインを設定してくれよな

https://github.com/naoishii/firebase-handson/blob/master/.eslintrc.js

## 準備2 Reactによるチャットアプリの作成
今回はFirebaseの話なのでここはコピーで済ませちゃいましょう。
step2ブランチをコピーしたらOKです

## firebseの準備とついでにhosting
Webでの登録とかは雰囲気でやっちゃってほしい。

ログイン→プロジェクトの作成

詳しくはReact入門（翔泳社）12章参照


### hosting
勢いにのってホスティングまでやる。
プロジェクト→hosting→使ってみる  
言われるがままにcliもインストールする。  
コマンドラインで対話型のインターフェイスによってどの機能を使うか（どの機能のコンフィグファイルを自動生成するか）を聞かれる。  
必要なものにspaceでチェックを付けてenter
1点、hostingに関して公開するのはどのディレクトリかを聞かれる。デフォルトはpublicだが、create-react-appはbuildなのでbuildにすると便利だと思う。

以下のコマンドでデプロイできる
```
firebase deploy
```
無事成功したらURLが表示されるのでアクセスして確認してみよう。

もしもりもりでFirebaseの設定をした場合、deployが遅くなることがある。  
変更に関連するサービスのみdeployしたい場合は
```
firebase deploy --only hosting
```
のように対象を絞ることができる

## Firebse Authentication(認証)
https://firebase.google.com/docs/auth/?authuser=0

https://github.com/pirosikick/react-hands-on-20171023/tree/master/5-use-firebase


### 認証機能を使う
デフォルトでは認証機能はOFFなのでwebUIから有効化する。

DEVELOP→ログイン方法(を設定)

匿名とgoogleを有効化しましょう。余裕があればTwitter, Github, Facebookもやりたい。

とりあえずUI上での設定は終了。コードに移っていきます。

### 認証を行うコードを書く
hostingはJSには修正はありませんでしたが、認証からはコードを書いていきます。
firebaseの機能を使うためのパッケージがあるのでインストールします。
```
npm install --save firebase
```

#### アプリケーションの初期化
https://firebase.google.com/docs/web/setup?authuser=0
API key などを取得します。
Project OverViewから「ウェブアプリに Firebase を追加」をクリックし、設定を取得します。公開しても大丈夫なようです。

この辺からはReact/Reduxと違ってnaoishiiの経験が浅くてベストプラクティスかどうかはわかりませんよと予めお断りさせてくださいｗ

firebaseの設定をするだけのファイルを作ります。`src/firebase.js`というファイルを作成し、先ほどコピーした設定を適用します。
```
import firebase from 'firebase';

const firebaseApp = firebase.initializeApp({
  こぴーぺ
});

export default firebaseApp;
```